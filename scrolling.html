<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <script>
        // Get all sections that have an ID defined
        const sections = document.querySelectorAll("section[id]");

        // Add an event listener listening for scroll
        window.addEventListener("scroll", navHighlighter);

        function navHighlighter() {
            // Get current scroll position
            let scrollY = window.pageYOffset;

            // Now we loop through sections to get height, top and ID values for each
            sections.forEach((current) => {
                const sectionHeight = current.offsetHeight;

                // Original:
                // const sectionTop = current.offsetTop - 50;
                //
                // Alex Turnwall's update:
                // Updated original line (above) to use getBoundingClientRect instead of offsetTop, based on:
                // https://plainjs.com/javascript/styles/get-the-position-of-an-element-relative-to-the-document-24/
                // https://newbedev.com/difference-between-getboundingclientrect-top-and-offsettop
                // This allows the use of sections inside a relative parent, which I'm not using here, but needed for a project
                //
                const sectionTop =
                    current.getBoundingClientRect().top + window.pageYOffset - 50;
                sectionId = current.getAttribute("id");

                /*
          - If our current scroll position enters the space where current section on screen is, add .active class to corresponding navigation link, else remove it
          - To know which link needs an active class, we use sectionId variable we are getting while looping through sections as an selector
          */
                if (scrollY > sectionTop && scrollY <= sectionTop + sectionHeight) {
                    document
                        .querySelector(".navigation a[href*=" + sectionId + "]")
                        .classList.add("active");
                } else {
                    document
                        .querySelector(".navigation a[href*=" + sectionId + "]")
                        .classList.remove("active");
                }
            });
        }

        const sections = document.querySelectorAll("section");
        const navLi = document.querySelectorAll("nav .container ul li");
        window.onscroll = () => {
            var current = "";

            sections.forEach((section) => {
                const sectionTop = section.offsetTop;
                if (pageYOffset >= sectionTop - 60) {
                    current = section.getAttribute("id");
                }
            });

            navLi.forEach((li) => {
                li.classList.remove("active");
                if (li.classList.contains(current)) {
                    li.classList.add("active");
                }
            });
        };

        const sections = document.querySelectorAll("section");
        const navLinks = document.querySelectorAll("nav a");

        window.addEventListener("scroll", function () {
            let navbar = document.querySelector("nav");
            let current = "";
            sections.forEach(function (section) {
                const sectionTop = section.offsetTop;
                const sectionHeight = section.clientHeight;
                if (scrollY >= sectionTop - sectionHeight / 3) {
                    current = `#${section.getAttribute("id")}`;
                }
                navLinks.forEach(function (each) {
                    // add/remove active class
                    each.classList.remove("nav-active");
                    if (each.getAttribute("href") == current) {
                        each.classList.add("nav-active");
                    }
                });
            });
        });
    </script>
    <style>
        html {
            scroll-behavior: smooth;
        }

        .icon {
            display: inline-block;
            width: 70px;
            height: 70px;
            background-size: cover;
        }

        .icon-facebook {
            background-image: url(img/icons/facebook.svg);
        }

        .icon-facebook:hover,
        .icon-facebook:focus {
            filter: invert(27%) sepia(51%) saturate(2878%) hue-rotate(346deg) brightness(104%) contrast(97%);
        }

        body {
            display: grid;
            height: 100vh;
            margin: 0;
            place-items: center center;
        }
    </style>
</head>

<body>
    <div>
        <a href="#"><span class="icon icon-facebook"></span></a>

        <a href=""><img src="img/icons/facebook.svg" width="50px" alt="" class="icon"></a>
    </div>
</body>

</html>